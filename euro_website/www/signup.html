{% set hide_navbar = 1 %}
{% set hide_footer = 1 %}
{% extends "templates/web.html" %}
{% block page_content %}
{% if redirect_to %}
  <meta http-equiv="refresh" content="0; url={{ redirect_to }}">
  <script>window.location.href = "{{ redirect_to }}";</script>
{% endif %}
<section class="page-hero">
  <div class="container">
    <p class="eyebrow">Create Account</p>
    <h1>Join Euro Plast.</h1>
    <p class="lead">Create your account to track orders and access your portal.</p>
  </div>
</section>

<section class="section">
  <div class="container grid-2">
    <form class="contact-card" id="signup-form">
      <label>Full Name</label>
      <input type="text" name="full_name" placeholder="Your name" required />
      <label>Email</label>
      <input type="email" name="email" placeholder="you@company.com" required />
      <label>Password</label>
      <div class="password-field">
        <input type="password" name="password" placeholder="Create a password" required />
        <button class="password-toggle" type="button" data-toggle-password aria-label="Show password">
          <i class="fa-regular fa-eye" aria-hidden="true"></i>
        </button>
      </div>
      <label class="checkbox-line">
        <input type="checkbox" name="is_trader" />
        Sign up as trader (wholesale)
      </label>
      <p class="form-note">Wholesale accounts require admin approval. Retail pricing applies until approved.</p>
      <button class="btn btn-solid" type="submit">Create account</button>
      <div class="form-note" id="signup-status"></div>
    </form>
    <div class="info-card">
      <h3>Wholesale accounts</h3>
      <p>Trader accounts use the Standard Selling price list and Commercial customer group.</p>
      <p>Retail accounts use the Website Price List and Individual customer group.</p>
    </div>
  </div>
</section>

<script>
  (function () {
    document.querySelectorAll("[data-toggle-password]").forEach((button) => {
      button.addEventListener("click", () => {
        const wrapper = button.closest(".password-field");
        const input = wrapper?.querySelector("input");
        if (!input) return;
        const isHidden = input.type === "password";
        input.type = isHidden ? "text" : "password";
        button.setAttribute("aria-label", isHidden ? "Hide password" : "Show password");
        const icon = button.querySelector("i");
        if (icon) {
          icon.classList.remove("fa-eye", "fa-eye-slash");
          icon.classList.add(isHidden ? "fa-eye-slash" : "fa-eye");
        }
      });
    });
  })();
</script>

{% endblock %}
