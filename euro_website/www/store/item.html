{% set hide_navbar = 1 %}
{% set hide_footer = 1 %}
{% extends "templates/web.html" %}
{% block page_content %}

<section class="section product-hero">
  <div class="container product-detail refined">
    <div class="gallery">
      <div class="product-detail-media" data-gallery-main style="background-image: url('{{ (gallery[0] if gallery else item.website_image or item.thumbnail or '/assets/frappe/images/ui/placeholder-image.png') }}')"></div>
      <div class="gallery-thumbs">
        {% for img in gallery %}
          <button class="thumb" type="button" data-gallery-thumb="{{ img }}" style="background-image: url('{{ img }}')"></button>
        {% endfor %}
      </div>
    </div>
    <div class="product-copy">
      <div class="product-top">
        <div class="product-status">
          {% if item.in_stock or item.is_in_stock %}
            <span class="stock in-stock">✔ In stock</span>
          {% else %}
            <span class="stock out-stock">✖ Out of stock</span>
          {% endif %}
        </div>
        <button class="wishlist-icon" type="button"
          data-add-to-wishlist
          data-item-code="{{ item.item_code }}"
          data-item-name="{{ item.web_item_name or item.website_item_name or item.item_name }}"
          data-item-route="{{ item.route or item.item_code }}"
          data-item-image="{{ item.website_image or item.thumbnail or '' }}">♥</button>
      </div>
      <h1>{{ item.web_item_name or item.website_item_name or item.item_name }}</h1>
      <div class="product-subline">
        <span class="subline-tag">Homeware essentials</span>
        <span class="subline-sep">•</span>
        <span class="subline-rating">★★★★★</span>
        <span class="subline-reviews">{{ reviews | length }} Reviews</span>
      </div>
      <div class="product-badges">
        <span class="tag">100% virgin material</span>
        <span class="tag">Food safe</span>
        <span class="tag">BPA free</span>
      </div>
      <p class="lead">{{ item.website_description or item.web_long_description or '' }}</p>
      <div class="product-qty">
        <div class="qty-label">Quantity</div>
        <div class="qty-control">
          <button type="button" class="qty-btn" data-qty-minus="detail-qty">−</button>
          <input id="detail-qty" type="number" min="1" value="1" />
          <button type="button" class="qty-btn" data-qty-plus="detail-qty">+</button>
        </div>
        <div class="product-price">{{ frappe.utils.fmt_money(price or 0) }}</div>
      </div>
      <div class="product-actions refined">
        <button class="btn btn-solid" type="button"
          data-add-to-cart
          data-item-code="{{ item.item_code }}"
          data-item-name="{{ item.web_item_name or item.website_item_name or item.item_name }}"
          data-item-route="{{ item.route or item.item_code }}"
          data-item-image="{{ item.website_image or item.thumbnail or '' }}"
          data-item-price="{{ price or 0 }}"
          data-qty-input="detail-qty">
          Add to cart
        </button>
        <button class="btn btn-solid btn-buy" type="button"
          data-buy-now
          data-item-code="{{ item.item_code }}"
          data-item-name="{{ item.web_item_name or item.website_item_name or item.item_name }}"
          data-item-route="{{ item.route or item.item_code }}"
          data-item-image="{{ item.website_image or item.thumbnail or '' }}"
          data-item-price="{{ price or 0 }}"
          data-qty-input="detail-qty">
          Buy now
        </button>
        <button class="btn btn-ghost" type="button" data-cart-toggle>View cart</button>
      </div>
      {% if options and options | length %}
        <div class="product-options">
          <div class="option-title">How much?</div>
          <div class="option-grid">
            {% for option in options %}
              <button type="button" class="option-pill {% if loop.index == 1 %}is-active{% endif %}">{{ option }}</button>
            {% endfor %}
          </div>
        </div>
      {% endif %}
      <div class="product-highlights">
        {% for highlight in highlights %}
          <div class="highlight">
            <div class="highlight-label">{{ highlight.label }}</div>
            <div class="highlight-value">{{ highlight.value }}</div>
          </div>
        {% endfor %}
      </div>
      <div class="product-meta refined">
        <div>Fulfilled via ERPNext</div>
        <div>Live stock and pricing</div>
        <div>Secure checkout</div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container grid-2">
    <div class="specs-card">
      <h2>Specifications</h2>
      {% if specs and specs | length %}
        <div class="specs-grid">
          {% for spec in specs %}
            <div class="spec-row">
              <div class="spec-label">{{ spec.label }}</div>
              <div class="spec-value">{{ spec.value }}</div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="muted">Specifications will be listed here.</p>
      {% endif %}
    </div>
    <div class="reviews-card">
      <h2>Reviews</h2>
      {% if reviews and reviews | length %}
        <div class="reviews-list">
          {% for review in reviews %}
            <div class="review">
              <div class="review-header">
                <div class="review-name">{{ review.customer_name or 'Customer' }}</div>
                <div class="review-rating">{{ review.rating or 0 }}/5</div>
              </div>
              <p>{{ review.review }}</p>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="muted">No reviews yet. Be the first to share your experience.</p>
      {% endif %}
    </div>
  </div>
</section>

{% endblock %}
